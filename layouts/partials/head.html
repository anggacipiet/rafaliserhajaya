<head>
  <meta charset="utf-8">
  <title>{{ .Title }}</title>

  {{ "<!-- Resource Hints -->" | safeHTML }}
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  
  {{ "<!-- mobile responsive meta -->" | safeHTML }}
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description"
    content="{{ with .Params.Description }}{{ . }}{{ else }}{{ with site.Params.description }}{{ . }}{{ end }}{{ end }}">
  {{ with site.Params.author }}
  <meta name="author" content="{{ . }}">{{ end }}
  
  <!-- theme meta -->
  <meta name="theme-name" content="educenter-hugo" />
  
  {{ hugo.Generator }}
  {{ "<!-- multilingual SEO optimizations -->" | safeHTML }}
  {{ if .IsTranslated }}
  {{ range .Page.AllTranslations }}
  <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
  {{ end }}
  {{ end }}

  {{ "<!-- Critical CSS -->" | safeHTML }}
  {{ partial "critical-css.html" . }}

  {{ "<!-- Preload Fonts -->" | safeHTML }}
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap&display=swap"></noscript>

  {{ "<!-- Preload Critical CSS -->" | safeHTML }}
  <link rel="preload" href="{{ "plugins/bootstrap/bootstrap.min.css" | absURL }}" as="style">
  <link rel="preload" href="{{ "scss/main.css" | absURL }}" as="style">

  {{ "<!-- plugins -->" | safeHTML }}
  {{ range site.Params.plugins.css }}
  <link rel="stylesheet" href="{{ .link | absURL }}" media="print" onload="this.media='all'">
  {{ end }}

  {{ "<!-- Main Stylesheet -->" | safeHTML }}
  {{ $styles := resources.Get "scss/main.scss" | toCSS | fingerprint "sha512" }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" integrity="{{ $styles.Data.Integrity }}" media="print" onload="this.media='all'">

  {{ "<!--Favicon-->" | safeHTML }}
  <link rel="shortcut icon" href="{{ `images/favicon.png` | absURL }}" type="image/x-icon">
  <link rel="icon" href="{{ `images/favicon.png` | absURL }}" type="image/x-icon">

  {{ "<!-- Preload Font Files -->" | safeHTML }}
  <link rel="preload" href="{{ "fonts/themify.woff?-fvbane" | absURL }}" as="font" type="font/woff" crossorigin>
  <link rel="preload" href="{{ "fonts/Futura-Bold.woff" | absURL }}" as="font" type="font/woff" crossorigin>

  {{ "<!-- Modern JavaScript -->" | safeHTML }}
  <script type="module">
    // Modern browsers - ES modules
    import { Filterizr } from '{{ "plugins/filterizr/filterizr.esm.min.js" | absURL }}';
    
    // Initialize Filterizr
    const filterizr = new Filterizr('.filtr-container');
  </script>
  <script nomodule src="{{ "plugins/filterizr/jquery.filterizr.min.js" | absURL }}"></script>

  {{ "<!-- Optimized Bootstrap -->" | safeHTML }}
  <link rel="stylesheet" href="{{ "plugins/bootstrap/bootstrap.critical.min.css" | absURL }}" media="all">
  <link rel="stylesheet" href="{{ "plugins/bootstrap/bootstrap.noncritical.min.css" | absURL }}" media="print" onload="this.media='all'">

  <script>
    // Modern CSS loading
    (function() {
      var cssFiles = [
        '{{ "plugins/bootstrap/bootstrap.min.css" | absURL }}',
        '{{ "plugins/slick/slick.css" | absURL }}',
        '{{ "plugins/animate/animate.css" | absURL }}',
        '{{ "plugins/venobox/venobox.css" | absURL }}',
        '{{ "plugins/themify-icons/themify-icons.css" | absURL }}',
        '{{ $styles.Permalink }}'
      ];
      
      function loadStyleSheet(src) {
        if (document.createStyleSheet) {
          document.createStyleSheet(src);
        }
        else {
          var stylesheet = document.createElement('link');
          stylesheet.href = src;
          stylesheet.rel = 'stylesheet';
          stylesheet.type = 'text/css';
          document.getElementsByTagName('head')[0].appendChild(stylesheet);
        }
      }
      
      // Load CSS asynchronously
      cssFiles.forEach(function(src) {
        window.requestAnimationFrame(function() {
          loadStyleSheet(src);
        });
      });
      
      // Fallback for older browsers
      if (!window.requestAnimationFrame) {
        cssFiles.forEach(loadStyleSheet);
      }
    })();
  </script>

</head>
