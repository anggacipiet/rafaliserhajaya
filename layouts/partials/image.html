{{ $src := .Src }}
{{ if $src }}
  {{ $webpSrc := replace $src (index (findRE "\\.(jpg|jpeg|png)$" $src) 0) ".webp" }}
  {{ $imagePath := printf "static/%s" $src }}
  {{ $hasImageConfig := fileExists $imagePath }}

  <picture>
    <source srcset="{{ $webpSrc | relURL }}" type="image/webp">
    <img 
      src="{{ $src | relURL }}" 
      alt="{{ .Alt }}" 
      {{ with .Class }}class="{{ . }}"{{ end }}
      {{ with .Style }}style="{{ . }}"{{ end }}
      {{ if $hasImageConfig }}
        {{ with (imageConfig $imagePath) }}
          
        {{ end }}
      {{ end }}
      loading="lazy"
      decoding="async"
    >
  </picture>
{{ else }}
  <!-- Fallback untuk gambar yang tidak ada -->
  <div class="image-placeholder" 
    {{ with .Class }}class="{{ . }}"{{ end }}
    style="background-color: #f5f5f5; min-height: 200px; display: flex; align-items: center; justify-content: center;">
    <span>Image not found</span>
  </div>
{{ end }}
