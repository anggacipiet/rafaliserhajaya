{{ $image := .image }}
{{ $alt := .alt }}
{{ $class := .class }}
{{ $width := .width | default "1920" }}

<picture>
  {{ $imageBase := path.Base $image }}
  {{ $imageExt := path.Ext $image }}
  {{ $imageName := strings.TrimSuffix $imageExt $imageBase }}
  {{ $imageDir := path.Dir $image }}
  
  <!-- AVIF -->
  <source
    type="image/avif"
    srcset="{{ printf "%s/%s.avif" $imageDir $imageName | absURL }}"
  >
  
  <!-- WebP -->
  <source
    type="image/webp"
    srcset="{{ printf "%s/%s.webp" $imageDir $imageName | absURL }}"
  >
  
  <!-- Fallback -->
  <img
    src="{{ $image | absURL }}"
    alt="{{ $alt }}"
    {{ with $class }}class="{{ . }}"{{ end }}
    loading="lazy"
    width="{{ $width }}"
  >
</picture>