<div class="search-wrapper">
  <div class="container">
    <div id="search-box">
      <!-- SearchBox widget akan dimuat di sini -->
    </div>
    <div id="hits">
      <!-- Hasil pencarian akan dimuat di sini -->
    </div>
  </div>
</div>

<!-- Include Algolia scripts -->
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.14.3/dist/algoliasearch-lite.umd.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.49.1/dist/instantsearch.production.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css">

<script>
const searchClient = algoliasearch(
  '{{ site.Params.algolia.app_id }}',
  '{{ site.Params.algolia.search_api_key }}'
);

const search = instantsearch({
  indexName: '{{ site.Params.algolia.index_name }}',
  searchClient,
  searchFunction(helper) {
    const container = document.querySelector('#hits');
    container.style.display = helper.state.query === '' ? 'none' : '';
    helper.search();
  }
});

// Tambahkan SearchBox widget
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-box',
    placeholder: 'Cari artikel, produk...',
    cssClasses: {
      input: 'form-control',
    }
  })
);

// Tambahkan Hits widget
search.addWidget(
  instantsearch.widgets.hits({
    container: '#hits',
    templates: {
      item: `
        <div class="hit-item">
          <div class="hit-image">
            <img src="{{ "{{image}}" }}" alt="{{ "{{title}}" }}">
          </div>
          <div class="hit-content">
            <h4><a href="{{ "{{url}}" }}">{{ "{{title}}" }}</a></h4>
            <p>{{ "{{#helpers.snippet}}{ "attribute": "content" }{{/helpers.snippet}}" }}</p>
          </div>
        </div>
      `,
      empty: `
        <div class="no-results">
          Tidak ada hasil untuk pencarian <em>"{{ "{{query}}" }}"</em>
        </div>
      `
    }
  })
);

search.start();
</script>

<style>
.search-wrapper {
  position: relative;
  margin: 2rem 0;
}

#search-box {
  margin-bottom: 1rem;
}

.hit-item {
  display: flex;
  margin-bottom: 1.5rem;
  padding: 1rem;
  border: 1px solid #eee;
  border-radius: 4px;
}

.hit-image {
  flex: 0 0 150px;
  margin-right: 1rem;
}

.hit-image img {
  width: 100%;
  height: 100px;
  object-fit: cover;
}

.hit-content {
  flex: 1;
}

.hit-content h4 {
  margin: 0 0 0.5rem;
}

.no-results {
  padding: 2rem;
  text-align: center;
  background: #f8f9fa;
  border-radius: 4px;
}

.ais-SearchBox-input {
  width: 100%;
  padding: 0.75rem 1rem;
}
</style>